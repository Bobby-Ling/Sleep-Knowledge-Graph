(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-diagnosisResult-diagnosisResult","components-progress-bar-progress-bar"],{1541:function(e,n,t){var a=t("6755");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=t("967d").default;i("1040a3a2",a,!0,{sourceMap:!1,shadowMode:!1})},"177c":function(e,n,t){"use strict";t.r(n);var a=t("2e9e"),i=t.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(s);n["default"]=i.a},"2e9e":function(e,n,t){"use strict";t("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("64aa");var a={data:function(){return{steps:[{id:0,name:"症状选择",path:"/pages/chooseSymptoms/chooseSymptoms"},{id:1,name:"初步诊断",path:"/pages/diagnosisResult/diagnosisResult"},{id:2,name:"问卷调查",path:"/pages/test-questions/test-questions"},{id:3,name:"问卷分析",path:"/pages/diagnosis/diagnosis"},{id:4,name:"病历上传",path:"/pages/upload/upload"},{id:5,name:"最终诊断",path:"/pages/analysis_all/analysis_all"}]}},props:{currentStep:{type:Number,default:0}},methods:{navigateToStep:function(e){var n=e.currentTarget.dataset,t=n.path,a=n.index;a<=this.currentStep+1&&uni.navigateTo({url:t})}},created:function(){}};n.default=a},"52fe":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){}));var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"nav-container"},[t("v-uni-view",{staticClass:"progress-bar"},[t("v-uni-view",{staticClass:"progress-track"},[t("v-uni-view",{staticClass:"progress-fill",style:"width: "+20*e.currentStep+"%"})],1),t("v-uni-view",{staticClass:"steps-wrapper"},e._l(e.steps,(function(n,a){return t("v-uni-view",{key:a,class:"step-item "+(e.currentStep>=a?"completed":"")+" "+(e.currentStep==a?"current":""),attrs:{"data-path":n.path,"data-index":a},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.navigateToStep.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"step-circle"},[t("v-uni-view",{staticClass:"circle-content"},[e.currentStep>a?t("v-uni-text",{staticClass:"check-icon"},[e._v("✓")]):t("v-uni-text",[e._v(e._s(a+1))])],1)],1),t("v-uni-view",{staticClass:"step-label"},[e._v(e._s(n.name))])],1)})),1)],1)],1)},i=[]},6755:function(e,n,t){var a=t("c86c");n=a(!1),n.push([e.i,'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* diagnosisResult.wxss */.container[data-v-502ab6ee]{padding:%?20?%}\n/* 问卷部分样式 */.questionnaire-section[data-v-502ab6ee]{margin:%?20?% 0 %?30?%;background:#fff;border-radius:%?20?%;padding:%?24?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.05)}.questionnaire-header[data-v-502ab6ee]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?20?%;padding:0 %?10?%}.header-content[data-v-502ab6ee]{flex:1}.header-title[data-v-502ab6ee]{font-size:%?32?%;font-weight:600;color:#333;display:block;margin-bottom:%?8?%}.header-subtitle[data-v-502ab6ee]{font-size:%?24?%;color:#666;display:block}.header-icon[data-v-502ab6ee]{font-size:%?40?%;margin-left:%?20?%}.questionnaire-scroll[data-v-502ab6ee]{width:100%;white-space:nowrap}.questionnaire-list[data-v-502ab6ee]{display:inline-flex;padding:%?10?% 0}.questionnaire-card[data-v-502ab6ee]{position:relative;width:%?240?%;height:%?160?%;margin-right:%?20?%;border-radius:%?16?%;background:linear-gradient(135deg,#4a90e2,#64b5f6);overflow:hidden;box-shadow:0 %?4?% %?12?% rgba(74,144,226,.2);transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.questionnaire-card[data-v-502ab6ee]:active{-webkit-transform:scale(.98);transform:scale(.98)}.card-content[data-v-502ab6ee]{position:relative;z-index:1;height:100%;padding:%?20?%;display:flex;flex-direction:column;justify-content:space-between}.card-decoration[data-v-502ab6ee]{position:absolute;right:%?-20?%;bottom:%?-20?%;width:%?100?%;height:%?100?%;border-radius:50%;background:hsla(0,0%,100%,.1)}.questionnaire-icon[data-v-502ab6ee]{width:%?48?%;height:%?48?%;border-radius:%?12?%;background:hsla(0,0%,100%,.2);display:flex;align-items:center;justify-content:center;margin-bottom:%?12?%}.icon-text[data-v-502ab6ee]{color:#fff;font-size:%?24?%;font-weight:500}.questionnaire-name[data-v-502ab6ee]{color:#fff;font-size:%?28?%;font-weight:500;margin-bottom:%?12?%}.start-text[data-v-502ab6ee]{color:hsla(0,0%,100%,.9);font-size:%?24?%;display:flex;align-items:center;margin-bottom:%?30?%}.start-text[data-v-502ab6ee]::after{content:"›";margin-left:%?4?%;font-size:%?28?%}\n/* 诊断结果部分样式 */.loading[data-v-502ab6ee]{text-align:center;padding:%?40?%;color:#666;font-size:%?28?%}.disease-card[data-v-502ab6ee]{background:#fff;border-radius:%?20?%;padding:%?30?%;margin-bottom:%?30?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.05);transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.disease-card[data-v-502ab6ee]:active{-webkit-transform:translateY(%?2?%);transform:translateY(%?2?%)}.disease-header[data-v-502ab6ee]{display:flex;align-items:center;justify-content:space-between;margin-bottom:%?16?%}.disease-name[data-v-502ab6ee]{font-size:%?32?%;font-weight:700;color:#333}.match-percentage[data-v-502ab6ee]{color:#4a90e2;font-size:%?28?%;font-weight:500}.disease-description[data-v-502ab6ee]{font-size:%?26?%;color:#666;line-height:1.6;margin:%?16?% 0}.section-title[data-v-502ab6ee]{font-size:%?28?%;color:#666;margin:%?24?% 0 %?16?%;font-weight:700;position:relative;padding-left:%?16?%}.section-title[data-v-502ab6ee]::before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:%?4?%;height:%?24?%;background:#4a90e2;border-radius:%?2?%}.matched-symptoms[data-v-502ab6ee]{display:flex;flex-wrap:wrap;gap:%?12?%;margin-bottom:%?20?%}.symptom-tag[data-v-502ab6ee]{background:#e8f4ff;color:#4a90e2;padding:%?8?% %?16?%;border-radius:%?100?%;font-size:%?24?%;transition:all .3s ease}.symptom-tag[data-v-502ab6ee]:active{-webkit-transform:scale(.95);transform:scale(.95);background:#d0e8ff}.treatment-item[data-v-502ab6ee]{background:#f8f8f8;padding:%?20?%;border-radius:%?12?%;margin-bottom:%?16?%;transition:all .3s ease}.treatment-item[data-v-502ab6ee]:active{-webkit-transform:scale(.99);transform:scale(.99);background:#f0f0f0}.treatment-name[data-v-502ab6ee]{font-size:%?26?%;font-weight:700;color:#333;margin-bottom:%?8?%}.treatment-detail[data-v-502ab6ee]{font-size:%?24?%;color:#666;line-height:1.6}.examination-item[data-v-502ab6ee]{display:flex;align-items:flex-start;padding:%?16?% 0;border-bottom:%?1?% solid #efefef}.examination-item[data-v-502ab6ee]:last-child{border-bottom:none}.examination-info[data-v-502ab6ee]{flex:1}.examination-name[data-v-502ab6ee]{font-size:%?26?%;color:#333;font-weight:500;margin-bottom:%?8?%}.examination-desc[data-v-502ab6ee]{font-size:%?24?%;color:#666;line-height:1.6}.severity-indicator[data-v-502ab6ee]{display:inline-block;padding:%?6?% %?16?%;border-radius:%?6?%;font-size:%?24?%;margin:%?12?% 0;font-weight:500}.severity-low[data-v-502ab6ee]{background:#e8f5e9;color:#4caf50}.severity-medium[data-v-502ab6ee]{background:#fff3e0;color:#ff9800}.severity-high[data-v-502ab6ee]{background:#ffebee;color:#f44336}\n/* 深色模式适配 */@media (prefers-color-scheme:dark){.container[data-v-502ab6ee]{background:#1a1a1a}.questionnaire-section[data-v-502ab6ee]{background:#2c2c2c}.header-title[data-v-502ab6ee]{color:#fff}.header-subtitle[data-v-502ab6ee]{color:#999}.questionnaire-card[data-v-502ab6ee]{background:linear-gradient(135deg,#2c5282,#4a5568)}.disease-card[data-v-502ab6ee]{background:#2c2c2c}.disease-name[data-v-502ab6ee]{color:#fff}.disease-description[data-v-502ab6ee]{color:#999}.treatment-item[data-v-502ab6ee]{background:#333}.treatment-name[data-v-502ab6ee]{color:#fff}.treatment-detail[data-v-502ab6ee]{color:#999}.examination-name[data-v-502ab6ee]{color:#fff}.examination-desc[data-v-502ab6ee]{color:#999}.examination-item[data-v-502ab6ee]{border-bottom-color:#333}.symptom-tag[data-v-502ab6ee]{background:rgba(74,144,226,.15);color:#64b5f6}.severity-low[data-v-502ab6ee]{background:rgba(76,175,80,.15);color:#81c784}.severity-medium[data-v-502ab6ee]{background:rgba(255,152,0,.15);color:#ffb74d}.severity-high[data-v-502ab6ee]{background:rgba(244,67,54,.15);color:#e57373}}\n/* 响应式调整 */@media screen and (max-width:375px){.questionnaire-card[data-v-502ab6ee]{width:%?220?%;height:%?150?%}.header-title[data-v-502ab6ee]{font-size:%?30?%}.disease-name[data-v-502ab6ee]{font-size:%?30?%}}\n/* 添加滚动条样式 */[data-v-502ab6ee]::-webkit-scrollbar{width:0;height:0;background:transparent}',""]),e.exports=n},"69df":function(e,n,t){"use strict";var a=t("d319"),i=t.n(a);i.a},7629:function(e,n,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("bf0f");var i=a(t("7b50")),s=a(t("7b50")),r={components:{progressBar:i.default},data:function(){return{diagnosisResults:[],loading:!0,openid:"5b1ff5cb-39b2-4210-99f2-9c7e85d08322",session_id:"",currentStep:1,relatedScales:[],relatedScalesIndex:[],symptom:{name:""},drug:{name:"",dosage:""},treatment:{name:"",description:""},exam:{name:"",description:""}}},onLoad:function(){var e=this;this.createSession().then((function(){e.submitSymptoms()}))},methods:{createSession:function(){var e=this;return new Promise((function(n,t){uni.request({url:"http://bobby.ipyingshe.net:22630/sessions/".concat(e.openid),method:"POST",header:{"content-type":"application/json"},data:{title:"User Session"},success:function(t){e.setData({session_id:t.data.session_id}),n()},fail:function(e){console.error("创建session失败:",e),t(e)}})}))},submitSymptoms:function(){var e=this,n=getApp().globalData.symptoms;uni.request({url:"http://bobby.ipyingshe.net:22630/query/".concat(this.openid),method:"POST",header:{"content-type":"application/json"},data:n,success:function(n){e.setData({diagnosisResults:n.data.result[0],relatedScales:n.data.related_scales||[],relatedScalesIndex:n.data.related_scales_index||[],loading:!1}),console.log(n.data.result)},fail:function(n){console.error("提交症状失败:",n),e.setData({loading:!1}),uni.showToast({title:"诊断失败",icon:"error"})}})},navigateToQuestionnaire:function(e){var n=e.currentTarget.dataset.testId;uni.navigateTo({url:"/pages/test-questions/test-questions?id=".concat(n)})}}};n.default=r,n.default.components=Object.assign({"progress-bar":s.default},n.default.components||{})},7848:function(e,n,t){var a=t("c86c");n=a(!1),n.push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/progress-bar/progress-bar.wxss */.nav-container[data-v-10ebe0d6]{width:100%;background:#fff;padding:%?20?% %?30?%;box-sizing:border-box;margin-bottom:%?20?% /* 添加底部间距 */}.progress-bar[data-v-10ebe0d6]{position:relative;padding:%?30?% 0}.progress-track[data-v-10ebe0d6]{position:absolute;top:%?60?%;left:8%;width:84%;height:%?4?%;background:#e8e8e8;border-radius:%?2?%}.progress-fill[data-v-10ebe0d6]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#4a90e2,#64b5f6);border-radius:%?2?%;transition:width .3s ease}.steps-wrapper[data-v-10ebe0d6]{position:relative;display:flex;justify-content:space-between;padding:0 %?20?%}.step-item[data-v-10ebe0d6]{display:flex;flex-direction:column;align-items:center;position:relative;flex:1;z-index:1}.step-circle[data-v-10ebe0d6]{width:%?48?%;height:%?48?%;border-radius:50%;background:#fff;border:%?3?% solid #e8e8e8;display:flex;align-items:center;justify-content:center;margin-bottom:%?16?%;transition:all .3s ease;font-size:%?24?%;color:#999}.circle-content[data-v-10ebe0d6]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.step-label[data-v-10ebe0d6]{font-size:%?24?%;color:#999;transition:all .3s ease;text-align:center;white-space:nowrap;-webkit-transform:scale(.9);transform:scale(.9) /* 稍微缩小文字以适应窄屏 */}\n/* 已完成步骤的样式 */.step-item.completed .step-circle[data-v-10ebe0d6]{background:#4a90e2;border-color:#4a90e2;color:#fff}.step-item.completed .step-label[data-v-10ebe0d6]{color:#4a90e2}\n/* 当前步骤的样式 */.step-item.current .step-circle[data-v-10ebe0d6]{background:#fff;border-color:#4a90e2;color:#4a90e2;box-shadow:0 0 0 %?4?% rgba(74,144,226,.2)}.step-item.current .step-label[data-v-10ebe0d6]{color:#4a90e2;font-weight:500}.check-icon[data-v-10ebe0d6]{font-size:%?24?%;font-weight:700}\n/* 动画效果 */.step-item[data-v-10ebe0d6]{transition:-webkit-transform .2s ease;transition:transform .2s ease;transition:transform .2s ease,-webkit-transform .2s ease}.step-item[data-v-10ebe0d6]:active{-webkit-transform:scale(.95);transform:scale(.95)}\n/* 适配深色模式 */@media (prefers-color-scheme:dark){.nav-container[data-v-10ebe0d6]{background:#2c2c2c}.progress-track[data-v-10ebe0d6]{background:#404040}.step-circle[data-v-10ebe0d6]{background:#2c2c2c;border-color:#404040}.step-item.current .step-circle[data-v-10ebe0d6]{background:#2c2c2c}}\n/* 响应式调整 */@media screen and (max-width:375px){.step-label[data-v-10ebe0d6]{-webkit-transform:scale(.85);transform:scale(.85)}.step-circle[data-v-10ebe0d6]{width:%?44?%;height:%?44?%}}",""]),e.exports=n},"7b50":function(e,n,t){"use strict";t.r(n);var a=t("52fe"),i=t("177c");for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);t("69df");var r=t("828b"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"10ebe0d6",null,!1,a["a"],void 0);n["default"]=o.exports},"82ca":function(e,n,t){"use strict";t.r(n);var a=t("c58f"),i=t("a516");for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);t("906b");var r=t("828b"),o=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"502ab6ee",null,!1,a["a"],void 0);n["default"]=o.exports},"906b":function(e,n,t){"use strict";var a=t("1541"),i=t.n(a);i.a},a516:function(e,n,t){"use strict";t.r(n);var a=t("7629"),i=t.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(s);n["default"]=i.a},c58f:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return a}));var a={progressBar:t("7b50").default},i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",[t("progress-bar",{attrs:{"current-step":e.currentStep}}),t("v-uni-view",{staticClass:"container"},[!e.loading&&e.relatedScales.length>0?[t("v-uni-view",{staticClass:"questionnaire-section"},[t("v-uni-view",{staticClass:"questionnaire-header"},[t("v-uni-view",{staticClass:"header-content"},[t("v-uni-text",{staticClass:"header-title"},[e._v("推荐问卷评估")]),t("v-uni-text",{staticClass:"header-subtitle"},[e._v("基于您的症状，我们建议您完成以下问卷进行深入评估")])],1),t("v-uni-view",{staticClass:"header-icon"},[e._v("📋")])],1),t("v-uni-scroll-view",{staticClass:"questionnaire-scroll",attrs:{"scroll-x":!0,enhanced:!0,"show-scrollbar":!1}},[t("v-uni-view",{staticClass:"questionnaire-list"},e._l(e.relatedScales,(function(n,a){return t("v-uni-view",{key:a,staticClass:"questionnaire-card",attrs:{"data-test-id":e.relatedScalesIndex[a]},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.navigateToQuestionnaire.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"card-content"},[t("v-uni-view",{staticClass:"questionnaire-icon"},[t("v-uni-text",{staticClass:"icon-text"},[e._v(e._s(n[0]))])],1),t("v-uni-text",{staticClass:"questionnaire-name"},[e._v(e._s(n))]),t("v-uni-text",{staticClass:"start-text"},[e._v("开始评估")])],1),t("v-uni-view",{staticClass:"card-decoration"})],1)})),1)],1)],1)]:e._e(),e.loading?t("v-uni-view",{staticClass:"loading"},[t("v-uni-text",[e._v("正在分析症状...")])],1):e._l(e.diagnosisResults,(function(n,a){return t("v-uni-view",{key:a,staticClass:"disease-card"},[t("v-uni-view",{staticClass:"disease-header"},[t("v-uni-text",{staticClass:"disease-name"},[e._v(e._s(n.Disease.name))]),t("v-uni-text",{staticClass:"match-percentage"},[e._v("匹配度: "+e._s(n.MatchPercentage)+"%")])],1),n.Disease.description?t("v-uni-text",{staticClass:"disease-description"},[e._v(e._s(n.Disease.description))]):e._e(),n.Disease.severity?t("v-uni-view",{class:"severity-indicator "+("轻度"===n.Disease.severity?"severity-low":"中度"===n.Disease.severity?"severity-medium":"severity-high")},[e._v("严重程度: "+e._s(n.Disease.severity))]):e._e(),t("v-uni-view",{staticClass:"section-title"},[e._v("匹配症状 ("+e._s(n.MatchedSymptomCount)+"/"+e._s(n.TotalSymptoms)+")")]),t("v-uni-view",{staticClass:"matched-symptoms"},e._l(n.MatchedSymptoms,(function(n,a){return t("v-uni-view",{key:a,staticClass:"symptom-tag"},[e._v(e._s(n.name))])})),1),n.DrugTreatments.length>0?[t("v-uni-view",{staticClass:"section-title"},[e._v("药物治疗")]),e._l(n.DrugTreatments,(function(n,a){return t("v-uni-view",{key:a,staticClass:"treatment-item"},[t("v-uni-view",{staticClass:"treatment-name"},[e._v(e._s(n.name))]),t("v-uni-view",{staticClass:"treatment-detail"},[e._v(e._s(n.description)),n.dosage?[e._v("【用量】"+e._s(n.dosage))]:e._e()],2)],1)}))]:e._e(),n.NonDrugTreatments.length>0?[t("v-uni-view",{staticClass:"section-title"},[e._v("非药物治疗")]),e._l(n.NonDrugTreatments,(function(n,a){return t("v-uni-view",{key:a,staticClass:"treatment-item"},[t("v-uni-view",{staticClass:"treatment-name"},[e._v(e._s(n.name))]),t("v-uni-view",{staticClass:"treatment-detail"},[e._v(e._s(n.description))])],1)}))]:e._e(),n.RequiredExaminations.length>0?[t("v-uni-view",{staticClass:"section-title"},[e._v("建议检查")]),e._l(n.RequiredExaminations,(function(n,a){return t("v-uni-view",{key:a,staticClass:"examination-item"},[t("v-uni-view",{staticClass:"examination-info"},[t("v-uni-view",{staticClass:"examination-name"},[e._v(e._s(n.name))]),t("v-uni-view",{staticClass:"examination-desc"},[e._v(e._s(n.description))])],1)],1)}))]:e._e()],2)}))],2)],1)},s=[]},d319:function(e,n,t){var a=t("7848");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=t("967d").default;i("230c1372",a,!0,{sourceMap:!1,shadowMode:!1})}}]);