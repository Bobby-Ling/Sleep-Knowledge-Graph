(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-test-questions-test-questions","components-progress-bar-progress-bar"],{"020e":function(n,e,t){"use strict";t.r(e);var a=t("400c"),s=t("c15e");for(var i in s)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return s[n]}))}(i);t("3094");var r=t("828b"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"d6a04e50",null,!1,a["a"],void 0);e["default"]=o.exports},"177c":function(n,e,t){"use strict";t.r(e);var a=t("2e9e"),s=t.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(i);e["default"]=s.a},1851:function(n,e,t){"use strict";var a=t("8bdb"),s=t("84d6"),i=t("1cb5");a({target:"Array",proto:!0},{fill:s}),i("fill")},"2e9e":function(n,e,t){"use strict";t("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t("64aa");var a={data:function(){return{steps:[{id:0,name:"症状选择",path:"/pages/chooseSymptoms/chooseSymptoms"},{id:1,name:"初步诊断",path:"/pages/diagnosisResult/diagnosisResult"},{id:2,name:"问卷调查",path:"/pages/test-questions/test-questions"},{id:3,name:"问卷分析",path:"/pages/diagnosis/diagnosis"},{id:4,name:"病历上传",path:"/pages/upload/upload"},{id:5,name:"最终诊断",path:"/pages/analysis_all/analysis_all"}]}},props:{currentStep:{type:Number,default:0}},methods:{navigateToStep:function(n){var e=n.currentTarget.dataset,t=e.path,a=e.index;a<=this.currentStep+1&&uni.navigateTo({url:t})}},created:function(){}};e.default=a},3094:function(n,e,t){"use strict";var a=t("3fc7"),s=t.n(a);s.a},"3fc7":function(n,e,t){var a=t("9834");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var s=t("967d").default;s("8d378350",a,!0,{sourceMap:!1,shadowMode:!1})},"400c":function(n,e,t){"use strict";t.d(e,"b",(function(){return s})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return a}));var a={progressBar:t("7b50").default},s=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",[t("progress-bar",{attrs:{"current-step":n.currentStep}}),t("v-uni-view",{staticClass:"page-container"},[t("v-uni-view",{staticClass:"header"},[t("v-uni-view",{staticClass:"main-title"},[n._v(n._s(n.currentQuestionnaire)+"失眠量表")]),t("v-uni-view",{staticClass:"sub-title"},[n._v(n._s(n.description))])],1),t("v-uni-view",{staticClass:"questions-container"},n._l(n.questions,(function(e,a){return t("v-uni-view",{key:a,staticClass:"question-card"},[t("v-uni-view",{staticClass:"question-number"},[n._v("问题 "+n._s(a+1))]),t("v-uni-view",{staticClass:"question-content"},[n._v(n._s(e.title))]),"radiogroup"===e.type?[t("v-uni-view",{staticClass:"options-grid"},n._l(e.choices,(function(e,s){return t("v-uni-view",{key:s,class:"option-card "+(n.selectedAnswers[a]===e.value?"selected":""),attrs:{"data-question-index":a,"data-value":e.value},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.handleOptionSelect.apply(void 0,arguments)}}},[t("v-uni-text",[n._v(n._s(e.text))])],1)})),1)]:n._e(),"text"===e.type?[t("v-uni-view",{staticClass:"text-input-container"},[t("v-uni-textarea",{staticClass:"text-input",attrs:{placeholder:"请输入您的答案",value:n.textAnswers[a],"data-question-index":a,maxlength:"-1","auto-height":!0},on:{input:function(e){arguments[0]=e=n.$handleEvent(e),n.handleTextInput.apply(void 0,arguments)}}})],1)]:n._e()],2)})),1),t("v-uni-view",{staticClass:"footer"},[t("v-uni-view",{staticClass:"submit-button",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.submitQuestionnaire.apply(void 0,arguments)}}},[t("v-uni-text",[n._v("提交评估")])],1)],1)],1)],1)},i=[]},"52fe":function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return s})),t.d(e,"a",(function(){}));var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",{staticClass:"nav-container"},[t("v-uni-view",{staticClass:"progress-bar"},[t("v-uni-view",{staticClass:"progress-track"},[t("v-uni-view",{staticClass:"progress-fill",style:"width: "+20*n.currentStep+"%"})],1),t("v-uni-view",{staticClass:"steps-wrapper"},n._l(n.steps,(function(e,a){return t("v-uni-view",{key:a,class:"step-item "+(n.currentStep>=a?"completed":"")+" "+(n.currentStep==a?"current":""),attrs:{"data-path":e.path,"data-index":a},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.navigateToStep.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"step-circle"},[t("v-uni-view",{staticClass:"circle-content"},[n.currentStep>a?t("v-uni-text",{staticClass:"check-icon"},[n._v("✓")]):t("v-uni-text",[n._v(n._s(a+1))])],1)],1),t("v-uni-view",{staticClass:"step-label"},[n._v(n._s(e.name))])],1)})),1)],1)],1)},s=[]},"69df":function(n,e,t){"use strict";var a=t("d319"),s=t.n(a);s.a},7848:function(n,e,t){var a=t("c86c");e=a(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* components/progress-bar/progress-bar.wxss */.nav-container[data-v-10ebe0d6]{width:100%;background:#fff;padding:%?20?% %?30?%;box-sizing:border-box;margin-bottom:%?20?% /* 添加底部间距 */}.progress-bar[data-v-10ebe0d6]{position:relative;padding:%?30?% 0}.progress-track[data-v-10ebe0d6]{position:absolute;top:%?60?%;left:8%;width:84%;height:%?4?%;background:#e8e8e8;border-radius:%?2?%}.progress-fill[data-v-10ebe0d6]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#4a90e2,#64b5f6);border-radius:%?2?%;transition:width .3s ease}.steps-wrapper[data-v-10ebe0d6]{position:relative;display:flex;justify-content:space-between;padding:0 %?20?%}.step-item[data-v-10ebe0d6]{display:flex;flex-direction:column;align-items:center;position:relative;flex:1;z-index:1}.step-circle[data-v-10ebe0d6]{width:%?48?%;height:%?48?%;border-radius:50%;background:#fff;border:%?3?% solid #e8e8e8;display:flex;align-items:center;justify-content:center;margin-bottom:%?16?%;transition:all .3s ease;font-size:%?24?%;color:#999}.circle-content[data-v-10ebe0d6]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.step-label[data-v-10ebe0d6]{font-size:%?24?%;color:#999;transition:all .3s ease;text-align:center;white-space:nowrap;-webkit-transform:scale(.9);transform:scale(.9) /* 稍微缩小文字以适应窄屏 */}\n/* 已完成步骤的样式 */.step-item.completed .step-circle[data-v-10ebe0d6]{background:#4a90e2;border-color:#4a90e2;color:#fff}.step-item.completed .step-label[data-v-10ebe0d6]{color:#4a90e2}\n/* 当前步骤的样式 */.step-item.current .step-circle[data-v-10ebe0d6]{background:#fff;border-color:#4a90e2;color:#4a90e2;box-shadow:0 0 0 %?4?% rgba(74,144,226,.2)}.step-item.current .step-label[data-v-10ebe0d6]{color:#4a90e2;font-weight:500}.check-icon[data-v-10ebe0d6]{font-size:%?24?%;font-weight:700}\n/* 动画效果 */.step-item[data-v-10ebe0d6]{transition:-webkit-transform .2s ease;transition:transform .2s ease;transition:transform .2s ease,-webkit-transform .2s ease}.step-item[data-v-10ebe0d6]:active{-webkit-transform:scale(.95);transform:scale(.95)}\n/* 适配深色模式 */@media (prefers-color-scheme:dark){.nav-container[data-v-10ebe0d6]{background:#2c2c2c}.progress-track[data-v-10ebe0d6]{background:#404040}.step-circle[data-v-10ebe0d6]{background:#2c2c2c;border-color:#404040}.step-item.current .step-circle[data-v-10ebe0d6]{background:#2c2c2c}}\n/* 响应式调整 */@media screen and (max-width:375px){.step-label[data-v-10ebe0d6]{-webkit-transform:scale(.85);transform:scale(.85)}.step-circle[data-v-10ebe0d6]{width:%?44?%;height:%?44?%}}",""]),n.exports=e},"7b50":function(n,e,t){"use strict";t.r(e);var a=t("52fe"),s=t("177c");for(var i in s)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return s[n]}))}(i);t("69df");var r=t("828b"),o=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"10ebe0d6",null,!1,a["a"],void 0);e["default"]=o.exports},9834:function(n,e,t){var a=t("c86c");e=a(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* pages/questionnaire/questionnaire.wxss */.page-container[data-v-d6a04e50]{min-height:100vh;background:linear-gradient(135deg,#f6f9fc,#edf2f7);padding:%?30?% 0}.header[data-v-d6a04e50]{padding:%?40?% %?40?% %?60?%;text-align:center}.main-title[data-v-d6a04e50]{font-size:%?44?%;font-weight:600;color:#2d3748;margin-bottom:%?16?%;letter-spacing:%?2?%}.sub-title[data-v-d6a04e50]{font-size:%?28?%;color:#718096;letter-spacing:%?1?%;text-align:left}.questions-container[data-v-d6a04e50]{padding:0 %?30?%}.question-card[data-v-d6a04e50]{background:#fff;border-radius:%?24?%;padding:%?40?% %?30?%;margin-bottom:%?40?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.05);transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.question-card[data-v-d6a04e50]:active{-webkit-transform:scale(.98);transform:scale(.98)}.question-number[data-v-d6a04e50]{font-size:%?24?%;font-weight:600;color:#5a67d8;text-transform:uppercase;letter-spacing:%?1?%;margin-bottom:%?20?%}.question-content[data-v-d6a04e50]{font-size:%?32?%;color:#2d3748;line-height:1.5;margin-bottom:%?40?%;font-weight:500}.options-grid[data-v-d6a04e50]{display:grid;grid-template-columns:repeat(2,1fr);gap:%?20?%;padding:%?10?% 0}.option-card[data-v-d6a04e50]{background:#f7fafc;border:%?2?% solid #e2e8f0;border-radius:%?16?%;padding:%?24?% %?20?%;text-align:center;font-size:%?28?%;color:#4a5568;transition:all .3s ease}.option-card.selected[data-v-d6a04e50]{background:#5a67d8;border-color:#5a67d8;color:#fff;box-shadow:0 %?4?% %?12?% rgba(90,103,216,.2);-webkit-transform:translateY(%?-2?%);transform:translateY(%?-2?%)}.option-card[data-v-d6a04e50]:active{-webkit-transform:scale(.95);transform:scale(.95)}.footer[data-v-d6a04e50]{padding:%?40?% %?30?%;position:-webkit-sticky;position:sticky;bottom:0}.submit-button[data-v-d6a04e50]{background:linear-gradient(135deg,#667eea,#764ba2);padding:%?28?%;border-radius:%?16?%;text-align:center;color:#fff;font-size:%?32?%;font-weight:600;letter-spacing:%?2?%;box-shadow:0 %?4?% %?20?% rgba(102,126,234,.3);transition:all .3s ease}.submit-button[data-v-d6a04e50]:active{-webkit-transform:scale(.98);transform:scale(.98);box-shadow:0 %?2?% %?10?% rgba(102,126,234,.2)}@-webkit-keyframes fadeIn-data-v-d6a04e50{from{opacity:0;-webkit-transform:translateY(%?20?%);transform:translateY(%?20?%)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes fadeIn-data-v-d6a04e50{from{opacity:0;-webkit-transform:translateY(%?20?%);transform:translateY(%?20?%)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}.question-card[data-v-d6a04e50]{-webkit-animation:fadeIn-data-v-d6a04e50 .5s ease forwards;animation:fadeIn-data-v-d6a04e50 .5s ease forwards}.question-card[data-v-d6a04e50]:nth-child(1){-webkit-animation-delay:.1s;animation-delay:.1s}.question-card[data-v-d6a04e50]:nth-child(2){-webkit-animation-delay:.2s;animation-delay:.2s}.question-card[data-v-d6a04e50]:nth-child(3){-webkit-animation-delay:.3s;animation-delay:.3s}.question-card[data-v-d6a04e50]:nth-child(4){-webkit-animation-delay:.4s;animation-delay:.4s}.question-card[data-v-d6a04e50]:nth-child(5){-webkit-animation-delay:.5s;animation-delay:.5s}.text-input-container[data-v-d6a04e50]{margin-top:%?20?%;padding:0 %?20?%}.text-input[data-v-d6a04e50]{width:100%;min-height:%?200?%;background:#fff;border-radius:%?16?%;padding:%?20?%;font-size:%?28?%;line-height:1.6;color:#333;box-sizing:border-box;border:%?2?% solid #e0e0e0;transition:all .3s ease}.text-input[data-v-d6a04e50]:focus{border-color:#007aff;box-shadow:0 0 %?8?% rgba(0,122,255,.1)}\n/* 适配暗黑模式 */@media (prefers-color-scheme:dark){.text-input[data-v-d6a04e50]{background:#2c2c2c;color:#fff;border-color:#404040}.text-input[data-v-d6a04e50]:focus{border-color:#0a84ff;box-shadow:0 0 %?8?% rgba(10,132,255,.2)}}\n/* 禁用状态 */.text-input[disabled][data-v-d6a04e50]{background:#f5f5f5;color:#999;cursor:not-allowed}\n/* 错误状态 */.text-input.error[data-v-d6a04e50]{border-color:#ff4d4f}\n/* 占位符样式 */.text-input[data-v-d6a04e50]::-webkit-input-placeholder{color:#999}.text-input[data-v-d6a04e50]::placeholder{color:#999}",""]),n.exports=e},c15e:function(n,e,t){"use strict";t.r(e);var a=t("d275"),s=t.n(a);for(var i in a)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(i);e["default"]=s.a},d275:function(n,e,t){"use strict";t("6a54");var a=t("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(t("b7c7"));t("1851"),t("01a2"),t("e39c"),t("e966"),t("bf0f");var i=a(t("7b50")),r=a(t("7b50")),o={components:{progressBar:i.default},data:function(){return{questions:[],selectedAnswers:[],currentQuestionnaire:null,testId:null,description:null,type:null,currentStep:2,questionIndex:0,choice:{value:"",text:""},choiceIndex:0}},onLoad:function(n){var e=n.id;this.setData({testId:e}),this.fetchQuestionnaire()},methods:{updateStep:function(n){this.setData({currentStep:n})},fetchQuestionnaire:function(){var n=this,e=this.testId-1;uni.request({url:"http://bobby.ipyingshe.net:22630/scales",method:"GET",success:function(t){var a=t.data[e],s=a.content.pages[0].elements;n.setData({questions:s,currentQuestionnaire:a.name,selectedAnswers:new Array(s.length).fill(null),description:t.data[e].content.description}),console.log(n.questions)},fail:function(n){console.error("Failed to fetch questionnaire:",n),uni.showToast({title:"获取问卷失败",icon:"none"})}})},handleOptionSelect:function(n){var e=n.currentTarget.dataset,t=e.questionIndex,a=e.value,i=(0,s.default)(this.selectedAnswers);i[t]===parseInt(a)?i[t]=null:i[t]=parseInt(a),this.setData({selectedAnswers:i}),console.log(this.selectedAnswers)},handleTextInput:function(n){var e=n.currentTarget.dataset.questionIndex,t=n.detail.value,a=(0,s.default)(this.selectedAnswers);a[e]=parseInt(t),this.setData({selectedAnswers:a}),console.log(this.selectedAnswers)},submitQuestionnaire:function(){if(this.selectedAnswers.some((function(n){return null===n})))uni.showToast({title:"请回答所有问题",icon:"none"});else{var n=getApp();n.globalData.scaleResults[this.currentQuestionnaire]=this.selectedAnswers,console.log(n.globalData.scaleResults),n.globalData.selectedAnswers=this.selectedAnswers,n.globalData.schema_name=this.currentQuestionnaire,uni.navigateTo({url:"/pages/diagnosis/diagnosis"})}}}};e.default=o,e.default.components=Object.assign({"progress-bar":r.default},e.default.components||{})},d319:function(n,e,t){var a=t("7848");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var s=t("967d").default;s("230c1372",a,!0,{sourceMap:!1,shadowMode:!1})}}]);