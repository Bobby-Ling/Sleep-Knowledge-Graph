(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-test-report-1-1"],{"0d92":function(t,e,a){"use strict";var i=a("e296"),s=a.n(i);s.a},1851:function(t,e,a){"use strict";var i=a("8bdb"),s=a("84d6"),o=a("1cb5");i({target:"Array",proto:!0},{fill:s}),o("fill")},"1bb0":function(t,e,a){"use strict";a.r(e);var i=a("61b5"),s=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=s.a},"431e":function(t,e,a){var i=a("c86c");e=i(!1),e.push([t.i,".container[data-v-44f471de]{min-height:100vh;background-color:#f5f6fa}.header[data-v-44f471de]{margin-top:%?-200?%;padding:%?40?% %?100?%;color:#fff}.header-content[data-v-44f471de]{padding:%?50?%;background-color:hsla(0,0%,100%,.1);border-radius:%?30?%}.test-info[data-v-44f471de]{margin-bottom:%?30?%}.test-type[data-v-44f471de]{display:block;font-size:%?36?%;font-weight:700;margin-bottom:%?10?%}.test-date[data-v-44f471de]{font-size:%?26?%;opacity:.8}.score-section[data-v-44f471de]{display:flex;align-items:center;gap:%?30?%}.score-circle[data-v-44f471de]{width:%?140?%;height:%?140?%;border-radius:50%;background-color:hsla(0,0%,100%,.2);display:flex;flex-direction:column;align-items:center;justify-content:center}.score-number[data-v-44f471de]{font-size:%?48?%;font-weight:700;line-height:1}.score-label[data-v-44f471de]{font-size:%?24?%;opacity:.8}.score-result[data-v-44f471de]{font-size:%?40?%;font-weight:700}.content[data-v-44f471de]{padding:%?30?%}.section[data-v-44f471de]{margin-bottom:%?40?%}.section-title[data-v-44f471de]{font-size:%?32?%;font-weight:700;color:#333;margin-bottom:%?20?%}.analysis-card[data-v-44f471de]{background-color:#fff;border-radius:%?20?%;padding:%?30?%}.analysis-summary[data-v-44f471de]{font-size:%?28?%;color:#666;line-height:1.6;margin-bottom:%?30?%}.factors-grid[data-v-44f471de]{display:grid;grid-template-columns:repeat(2,1fr);gap:%?20?%}.factor-item[data-v-44f471de]{background-color:#f8f9fc;border-radius:%?16?%;padding:%?20?%}.factor-score[data-v-44f471de]{margin-bottom:%?10?%}.factor-score .number[data-v-44f471de]{font-size:%?36?%;font-weight:700;color:#4a6feb}.factor-score .label[data-v-44f471de]{font-size:%?24?%;color:#999;margin-left:%?4?%}.factor-name[data-v-44f471de]{display:block;font-size:%?28?%;font-weight:700;color:#333;margin-bottom:%?8?%}.factor-desc[data-v-44f471de]{font-size:%?24?%;color:#666;line-height:1.4}.suggestions-list[data-v-44f471de]{background-color:#fff;border-radius:%?20?%}.suggestion-item[data-v-44f471de]{padding:%?30?%;display:flex;align-items:center;border-bottom:%?2?% solid #f5f6fa}.suggestion-item[data-v-44f471de]:last-child{border-bottom:none}.suggestion-content[data-v-44f471de]{flex:1}.suggestion-title[data-v-44f471de]{display:block;font-size:%?28?%;font-weight:700;color:#333;margin-bottom:%?8?%}.suggestion-desc[data-v-44f471de]{font-size:%?26?%;color:#666;line-height:1.4}.arrow-icon[data-v-44f471de]{width:%?32?%;height:%?32?%;margin-left:%?20?%}.trend-chart[data-v-44f471de]{background:#fff;border-radius:%?20?%;padding:%?30?%;position:relative}.line-chart[data-v-44f471de]{width:100%;height:%?1000?%;margin-bottom:%?30?%}.chart-container[data-v-44f471de]{display:flex;justify-content:space-between;align-items:flex-end;padding:%?20?% 0}.chart-bar[data-v-44f471de]{width:%?40?%;background:#e0e7ff;border-radius:%?20?%;position:relative;display:flex;flex-direction:column;align-items:center}.bar-score[data-v-44f471de]{font-size:%?24?%;color:#666;margin-top:%?-30?%}.bar-date[data-v-44f471de]{font-size:%?24?%;color:#999;position:absolute;bottom:%?-40?%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.footer[data-v-44f471de]{position:fixed;bottom:0;left:0;right:0;background-color:#fff;padding:%?20?% %?30?%;box-shadow:0 %?-4?% %?20?% rgba(0,0,0,.05)}.action-buttons[data-v-44f471de]{display:flex;gap:%?20?%;margin-bottom:%?20?%}.export-btn[data-v-44f471de],\n.share-btn[data-v-44f471de]{flex:1;height:%?80?%;display:flex;align-items:center;justify-content:center;gap:%?10?%;background-color:#f5f6fa;border-radius:%?40?%;font-size:%?28?%;color:#666}.export-btn uni-image[data-v-44f471de],\n.share-btn uni-image[data-v-44f471de]{width:%?32?%;height:%?32?%}.new-test-btn[data-v-44f471de]{width:100%;height:%?88?%;border-radius:%?44?%;color:#fff;font-size:%?32?%;font-weight:700;display:flex;align-items:center;justify-content:center}",""]),t.exports=e},"61b5":function(t,e,a){"use strict";a("6a54");var i=a("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c"),a("bf0f"),a("2797"),a("1851");var s=i(a("b7c7")),o={data:function(){return{report:{id:1,type:"失眠风险评估",date:"2024-11-26 11:30",duration:"3分钟",score:85,result:"轻度失眠风险",color:"#4A6FEB",analysis:{summary:"您当前存在轻度失眠风险，建议关注睡眠习惯的改善。",factors:[{name:"入睡时间",score:75,desc:"入睡较慢，平均需要30分钟以上"},{name:"睡眠质量",score:82,desc:"睡眠质量一般，存在易醒情况"},{name:"睡眠时长",score:88,desc:"睡眠时长基本达标，但略显不足"},{name:"日间表现",score:90,desc:"日间精神状态良好"}]},suggestions:[{title:"规律作息",content:"建议保持规律的作息时间，每天固定时间上床和起床，包括周末。"},{title:"睡眠环境",content:"确保睡眠环境安静、黑暗、温度适宜（18-22℃），有助于提高睡眠质量。"},{title:"放松训练",content:"睡前进行10-15分钟的放松练习，如深呼吸、渐进性肌肉放松等。"},{title:"行为调整",content:"避免睡前使用电子设备，不在床上处理工作或看手机。"}],trends:[{date:"10-20",score:75},{date:"10-25",score:78},{date:"11-01",score:80},{date:"11-08",score:82},{date:"11-15",score:83},{date:"11-26",score:85}]}}},onLoad:function(t){},onShareAppMessage:function(){return{title:"我的睡眠评估报告",path:"/pages/report/report?id=".concat(this.report.id)}},onReady:function(){this.drawLineChart()},methods:{exportReport:function(){uni.showLoading({title:"正在导出..."}),setTimeout((function(){uni.hideLoading(),uni.showToast({title:"报告已导出",icon:"success"})}),1500)},viewSuggestionDetail:function(t){var e=t.currentTarget.dataset.index,a=this.report.suggestions[e];uni.showModal({title:a.title,content:a.content,showCancel:!1})},startNewTest:function(){uni.navigateTo({url:"/pages/quickTest/quickTest"})},drawLineChart:function(){var t=uni.createCanvasContext("lineChart"),e=this.report.trends,a=uni.getSystemInfoSync(),i=a.windowWidth-80,o={top:50,right:50,bottom:70,left:70},n=i-o.left-o.right,r=500-o.top-o.bottom,c=Math.max.apply(Math,(0,s.default)(e.map((function(t){return t.score})))),d=Math.min.apply(Math,(0,s.default)(e.map((function(t){return t.score})))),l=c-d,f=Math.ceil(l/4),u=Math.floor(d/f)*f,v=Math.ceil(c/f)*f;t.setStrokeStyle("#EEEEEE"),t.setLineWidth(1),t.setFontSize(12),t.setTextAlign("right"),t.setTextBaseline("middle");for(var g=0;g<=5;g++){var b=o.top+r*(1-g/5),p=u+g/5*(v-u);t.beginPath(),t.moveTo(o.left,b),t.lineTo(i-o.right,b),t.stroke(),t.setFillStyle("#666666"),t.fillText(p.toFixed(0),o.left-10,b)}t.setTextAlign("center"),t.setTextBaseline("top");var h=n/(e.length-1);e.forEach((function(e,a){var i=o.left+h*a;t.setStrokeStyle("#EEEEEE"),t.beginPath(),t.moveTo(i,o.top),t.lineTo(i,500-o.bottom),t.stroke(),t.setFillStyle("#666666"),t.save(),t.translate(i,500-o.bottom+10),t.rotate(-Math.PI/4),t.fillText(e.date,0,0),t.restore()})),t.setStrokeStyle("#000000"),t.setLineWidth(2),t.beginPath(),t.moveTo(o.left,o.top),t.lineTo(o.left,500-o.bottom),t.moveTo(o.left,500-o.bottom),t.lineTo(i-o.right,500-o.bottom),t.stroke(),t.beginPath(),t.setStrokeStyle("#4A6FEB"),t.setLineWidth(2),e.forEach((function(e,a){var i=o.left+h*a,s=o.top+r*(1-(e.score-u)/(v-u));0===a?t.moveTo(i,s):t.lineTo(i,s)})),t.stroke(),e.forEach((function(e,a){var i=o.left+h*a,s=o.top+r*(1-(e.score-u)/(v-u));t.beginPath(),t.setFillStyle("#FFFFFF"),t.setStrokeStyle("#4A6FEB"),t.setLineWidth(2),t.arc(i,s,4,0,2*Math.PI),t.stroke(),t.fill(),t.setFontSize(12),t.setTextAlign("center"),t.setFillStyle("#4A6FEB"),t.fillText(e.score,i,s-15)})),t.save(),t.setFontSize(14),t.setTextAlign("center"),t.translate(o.left-40,250),t.rotate(-Math.PI/2),t.fillText("得分",0,0),t.restore(),t.setFontSize(14),t.setTextAlign("center"),t.fillText("日期",i/2,480),t.draw()}}};e.default=o},"76af":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"header",style:"background-color: "+t.report.color},[a("v-uni-view",{staticClass:"header-content",staticStyle:{width:"550rpx",display:"block","box-sizing":"border-box"}},[a("v-uni-view",{staticClass:"test-info"},[a("v-uni-text",{staticClass:"test-type"},[t._v(t._s(t.report.type))]),a("v-uni-text",{staticClass:"test-date"},[t._v(t._s(t.report.date)+" · 用时"+t._s(t.report.duration))])],1),a("v-uni-view",{staticClass:"score-section"},[a("v-uni-view",{staticClass:"score-circle"},[a("v-uni-text",{staticClass:"score-number"},[t._v(t._s(t.report.score))]),a("v-uni-text",{staticClass:"score-label"},[t._v("分")])],1),a("v-uni-text",{staticClass:"score-result"},[t._v(t._s(t.report.result))])],1)],1)],1),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"section"},[a("v-uni-view",{staticClass:"section-title"},[t._v("评估分析")]),a("v-uni-view",{staticClass:"analysis-card"},[a("v-uni-text",{staticClass:"analysis-summary"},[t._v(t._s(t.report.analysis.summary))]),a("v-uni-view",{staticClass:"factors-grid"},t._l(t.report.analysis.factors,(function(e,i){return a("v-uni-view",{key:i,staticClass:"factor-item"},[a("v-uni-view",{staticClass:"factor-score"},[a("v-uni-text",{staticClass:"number"},[t._v(t._s(e.score))]),a("v-uni-text",{staticClass:"label"},[t._v("分")])],1),a("v-uni-text",{staticClass:"factor-name"},[t._v(t._s(e.name))]),a("v-uni-text",{staticClass:"factor-desc"},[t._v(t._s(e.desc))])],1)})),1)],1)],1),a("v-uni-view",{staticClass:"section"},[a("v-uni-view",{staticClass:"section-title"},[t._v("改善建议")]),a("v-uni-view",{staticClass:"suggestions-list"},t._l(t.report.suggestions,(function(e,i){return a("v-uni-view",{key:i,staticClass:"suggestion-item",attrs:{"data-index":i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.viewSuggestionDetail.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"suggestion-content"},[a("v-uni-text",{staticClass:"suggestion-title"},[t._v(t._s(e.title))]),a("v-uni-text",{staticClass:"suggestion-desc"},[t._v(t._s(e.content))])],1),a("v-uni-image",{staticClass:"arrow-icon",attrs:{src:"/static/assets/icons/arrow-right.png"}})],1)})),1)],1),a("v-uni-view",{staticClass:"section"},[a("v-uni-view",{staticClass:"section-title"},[t._v("趋势变化")]),a("v-uni-view",{staticClass:"trend-chart"},[a("v-uni-canvas",{staticClass:"line-chart",attrs:{"canvas-id":"lineChart"}})],1)],1)],1),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"action-buttons"},[a("v-uni-button",{staticClass:"export-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.exportReport.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:"https://6d65-mental-miniapp-9gg5j9ahdeb719a2-1322861354.tcb.qcloud.la/assets/icons/export.png?sign=87644dc333dcbd61cd05d95b2f228b98&t=1735286948"}}),a("v-uni-text",[t._v("导出报告")])],1),a("v-uni-button",{staticClass:"share-btn",attrs:{"open-type":"share"}},[a("v-uni-image",{attrs:{src:"https://6d65-mental-miniapp-9gg5j9ahdeb719a2-1322861354.tcb.qcloud.la/assets/icons/share.png?sign=6efd0bc37cdc7506b0021bebc407921f&t=1735286992"}}),a("v-uni-text",[t._v("分享报告")])],1)],1),a("v-uni-button",{staticClass:"new-test-btn",style:"background-color: "+t.report.color,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.startNewTest.apply(void 0,arguments)}}},[t._v("开始新的测试")])],1)],1)},s=[]},bdca:function(t,e,a){"use strict";a.r(e);var i=a("76af"),s=a("1bb0");for(var o in s)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return s[t]}))}(o);a("0d92");var n=a("828b"),r=Object(n["a"])(s["default"],i["b"],i["c"],!1,null,"44f471de",null,!1,i["a"],void 0);e["default"]=r.exports},e296:function(t,e,a){var i=a("431e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("967d").default;s("39909d76",i,!0,{sourceMap:!1,shadowMode:!1})}}]);