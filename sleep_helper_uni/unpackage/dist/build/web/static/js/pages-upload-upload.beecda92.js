(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-upload-upload","components-progress-bar-progress-bar"],{"0a34":function(t,a,e){"use strict";e.r(a);var i=e("3bf3"),s=e("c942");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return s[t]}))}(n);e("43fd");var o=e("828b"),d=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"58dbfbbd",null,!1,i["a"],void 0);a["default"]=d.exports},"0e4f":function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"nav-container"},[e("v-uni-view",{staticClass:"progress-bar"},[e("v-uni-view",{staticClass:"progress-track"},[e("v-uni-view",{staticClass:"progress-fill",style:"width: "+20*t.currentStep+"%"})],1),e("v-uni-view",{staticClass:"steps-wrapper"},t._l(t.steps,(function(a,i){return e("v-uni-view",{key:i,class:"step-item "+(t.currentStep>=i?"completed":"")+" "+(t.currentStep==i?"current":""),attrs:{"data-path":a.path,"data-index":i},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.navigateToStep.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"step-circle"},[e("v-uni-view",{staticClass:"circle-content"},[t.currentStep>i?e("v-uni-text",{staticClass:"check-icon"},[t._v("✓")]):e("v-uni-text",[t._v(t._s(i+1))])],1)],1),e("v-uni-view",{staticClass:"step-label"},[t._v(t._s(a.name))])],1)})),1)],1),e("v-uni-view",{staticClass:"control-buttons"},[e("v-uni-button",{class:"btn prev "+(0===t.currentStep?"disabled":""),attrs:{disabled:0===t.currentStep},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePrevStep.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"btn-icon"},[t._v("←")]),e("v-uni-text",[t._v("上一步")])],1),e("v-uni-button",{class:"btn skip "+(0===t.currentStep||3===t.currentStep?"disabled":""),attrs:{disabled:0===t.currentStep||3===t.currentStep},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleSkip.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"btn-icon"},[t._v("⤵")]),e("v-uni-text",[t._v("跳过")])],1),e("v-uni-button",{class:"btn next "+(2===t.currentStep?"disabled":""),on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handleNextStep.apply(void 0,arguments)}}},[e("v-uni-text",[t._v("下一步")]),e("v-uni-text",{staticClass:"btn-icon"},[t._v("→")])],1)],1)],1)},s=[]},"16bb":function(t,a,e){"use strict";var i=e("3983"),s=e.n(i);s.a},"177c":function(t,a,e){"use strict";e.r(a);var i=e("2e9e"),s=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=s.a},"263a":function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'/* pages/upload/upload.wxss */.container[data-v-58dbfbbd]{padding:%?30?%;background:#f5f6fa;min-height:100vh}.info-card[data-v-58dbfbbd]{display:flex;align-items:center;background:#fff;padding:%?24?%;border-radius:%?16?%;margin-bottom:%?30?%;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05)}.info-icon[data-v-58dbfbbd]{font-size:%?40?%;margin-right:%?20?%}.info-content[data-v-58dbfbbd]{flex:1}.info-text[data-v-58dbfbbd]{display:block;font-size:%?26?%;color:#666;line-height:1.6}.upload-section[data-v-58dbfbbd]{margin-bottom:%?30?%}.upload-options[data-v-58dbfbbd]{display:flex;gap:%?20?%}.upload-btn[data-v-58dbfbbd]{flex:1;background:#fff;border-radius:%?16?%;padding:%?30?%;display:flex;flex-direction:column;align-items:center;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05);transition:all .3s ease}.upload-btn[data-v-58dbfbbd]:active{-webkit-transform:scale(.98);transform:scale(.98)}.btn-icon[data-v-58dbfbbd]{font-size:%?48?%;margin-bottom:%?16?%}.loading[data-v-58dbfbbd]{text-align:center;padding:%?40?%}.loading-spinner[data-v-58dbfbbd]{width:%?48?%;height:%?48?%;border:%?4?% solid #f3f3f3;border-top:%?4?% solid #4a90e2;border-radius:50%;-webkit-animation:spin-data-v-58dbfbbd 1s linear infinite;animation:spin-data-v-58dbfbbd 1s linear infinite;margin:0 auto %?20?%}@-webkit-keyframes spin-data-v-58dbfbbd{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin-data-v-58dbfbbd{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.result-section[data-v-58dbfbbd]{background:#fff;border-radius:%?16?%;padding:%?30?%;margin-bottom:%?30?%;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.05)}.result-header[data-v-58dbfbbd]{margin-bottom:%?24?%;padding-bottom:%?16?%;border-bottom:%?1?% solid #eee}.result-title[data-v-58dbfbbd]{font-size:%?32?%;font-weight:600;color:#333}.info-block[data-v-58dbfbbd]{background:#fff;border-radius:%?16?%;padding:%?24?%;margin-bottom:%?30?%;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05)}.block-title[data-v-58dbfbbd]{font-size:%?30?%;font-weight:600;color:#333;margin-bottom:%?20?%;padding-left:%?20?%;position:relative}.block-title[data-v-58dbfbbd]::before{content:"";position:absolute;left:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:%?6?%;height:%?28?%;background:#4a90e2;border-radius:%?3?%}.info-grid[data-v-58dbfbbd]{display:grid;grid-template-columns:repeat(3,1fr);gap:%?20?%}.info-item[data-v-58dbfbbd]{background:#f8f9fa;padding:%?16?%;border-radius:%?12?%}.label[data-v-58dbfbbd]{font-size:%?24?%;color:#999;display:block;margin-bottom:%?8?%}.value[data-v-58dbfbbd]{font-size:%?28?%;color:#333;font-weight:500}.course-grid[data-v-58dbfbbd]{display:grid;grid-template-columns:1fr;gap:%?16?%}.course-item[data-v-58dbfbbd]{background:#f8f9fa;padding:%?16?%;border-radius:%?12?%}\n/* 当前症状样式 */.symptoms-block[data-v-58dbfbbd]{margin-bottom:%?40?%}.symptoms-list[data-v-58dbfbbd]{display:grid;grid-template-columns:repeat(2,1fr);gap:%?20?%}.symptom-item[data-v-58dbfbbd]{background:#fff;padding:%?24?%;border-radius:%?16?%;position:relative;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05);border:1px solid #e8f4ff;display:flex;align-items:stretch;overflow:hidden}.symptom-content[data-v-58dbfbbd]{flex:1;position:relative;z-index:1}\n/* 修改症状名称样式 */.symptom-name-tag[data-v-58dbfbbd]{display:inline-block;background:#fff7e6;color:#fa8c16;padding:%?6?% %?16?%;border-radius:%?6?%;font-size:%?28?%;font-weight:500;border:1px solid #ffd591;margin-bottom:%?12?%}.symptom-details[data-v-58dbfbbd]{font-size:%?26?%;color:#666;line-height:1.4;display:block;margin-top:%?8?%}\n/* 调整卡片内边距 */.symptom-item[data-v-58dbfbbd]{background:#fff;padding:%?20?%;border-radius:%?16?%;position:relative;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05);border:1px solid #e8f4ff;display:flex;align-items:flex-start;overflow:hidden}\n/* 深色模式适配 */@media (prefers-color-scheme:dark){.symptom-name-tag[data-v-58dbfbbd]{background:rgba(250,140,22,.1);color:#ffa940;border-color:rgba(250,140,22,.2)}.symptom-details[data-v-58dbfbbd]{color:#999}.symptom-item[data-v-58dbfbbd]{background:#2c2c2c;border-color:rgba(74,144,226,.2)}}.symptom-indicator[data-v-58dbfbbd]{width:%?6?%;background:#4a90e2;position:absolute;left:0;top:0;bottom:0}\n/* 否认症状的样式 */.denied-block[data-v-58dbfbbd]{margin-bottom:%?40?%}.denied-symptoms[data-v-58dbfbbd]{display:flex;flex-wrap:wrap;gap:%?16?%;padding:%?20?%;background:#f8f9fa;border-radius:%?16?%}.denied-symptom-tag[data-v-58dbfbbd]{padding:%?8?% %?20?%;border-radius:%?8?%;font-size:%?26?%;color:#666;background:#fff;border:1px solid #eee}\n/* 深色模式适配 */@media (prefers-color-scheme:dark){.denied-symptoms[data-v-58dbfbbd]{background:#2c2c2c}.denied-symptom-tag[data-v-58dbfbbd]{background:#333;border-color:#444;color:#999}}\n/* 病史记录样式 */.history-list[data-v-58dbfbbd]{background:#f8f9fa;padding:%?20?%;border-radius:%?12?%}.history-item[data-v-58dbfbbd]{margin-bottom:%?16?%}.history-item[data-v-58dbfbbd]:last-child{margin-bottom:0}.history-label[data-v-58dbfbbd]{color:#666;font-size:%?28?%}.history-value[data-v-58dbfbbd]{color:#333;font-size:%?28?%}.diagnosis-section[data-v-58dbfbbd]{padding:%?20?%;background:#f8f9fa;border-radius:%?12?%}.diagnosis-list[data-v-58dbfbbd]{display:flex;flex-wrap:wrap;gap:%?12?%}.diagnosis-item[data-v-58dbfbbd]{background:#e8f4ff;color:#4a90e2;padding:%?8?% %?20?%;border-radius:%?100?%;font-size:%?26?%}.sub-title[data-v-58dbfbbd]{font-size:%?26?%;color:#666;margin-bottom:%?16?%}.margin-top[data-v-58dbfbbd]{margin-top:%?24?%}.diagnosis-item.differential[data-v-58dbfbbd]{background:#fff3e0;color:#ff9800}.action-section[data-v-58dbfbbd]{margin-top:%?40?%;padding:%?20?% 0}.next-btn[data-v-58dbfbbd]{background:linear-gradient(135deg,#4a90e2,#64b5f6);color:#fff;border-radius:%?100?%;padding:%?24?%;font-size:%?30?%;display:flex;align-items:center;justify-content:center;box-shadow:0 %?4?% %?12?% rgba(74,144,226,.2);transition:all .3s ease}.next-btn[data-v-58dbfbbd]:active{-webkit-transform:translateY(%?2?%);transform:translateY(%?2?%)}.arrow[data-v-58dbfbbd]{margin-left:%?8?%;font-size:%?32?%}\n/* 深色模式适配 */@media (prefers-color-scheme:dark){.container[data-v-58dbfbbd]{background:#1a1a1a}.info-card[data-v-58dbfbbd],\n    .upload-btn[data-v-58dbfbbd],\n    .result-section[data-v-58dbfbbd]{background:#2c2c2c}.info-text[data-v-58dbfbbd]{color:#999}.result-title[data-v-58dbfbbd]{color:#fff}.value[data-v-58dbfbbd]{color:#fff}.info-item[data-v-58dbfbbd],\n    .course-item[data-v-58dbfbbd],\n    .history-list[data-v-58dbfbbd],\n    .diagnosis-section[data-v-58dbfbbd]{background:#333}.symptom-item[data-v-58dbfbbd]{background:#2c2c2c;border-color:rgba(74,144,226,.2)}.symptom-name[data-v-58dbfbbd]{color:#fff}.symptom-details[data-v-58dbfbbd]{color:#999}.denied-symptoms[data-v-58dbfbbd]{background:#2c2c2c}.denied-text[data-v-58dbfbbd]{color:#999}.info-block[data-v-58dbfbbd]{background:#2c2c2c}.block-title[data-v-58dbfbbd]{color:#fff}.history-label[data-v-58dbfbbd],\n    .history-value[data-v-58dbfbbd]{color:#fff}.sub-title[data-v-58dbfbbd]{color:#999}}\n/* 响应式调整 */@media screen and (max-width:375px){.container[data-v-58dbfbbd]{padding:%?20?%}.symptom-name[data-v-58dbfbbd]{font-size:%?28?%}.symptom-details[data-v-58dbfbbd]{font-size:%?24?%}.block-title[data-v-58dbfbbd]{font-size:%?28?%}.info-grid[data-v-58dbfbbd]{gap:%?16?%}.symptoms-list[data-v-58dbfbbd]{grid-template-columns:1fr}}.test-images[data-v-58dbfbbd]{margin-top:20px;padding:15px;background:#f8f9fa;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.05)}.section-title[data-v-58dbfbbd]{font-size:16px;font-weight:500;color:#333;margin-bottom:15px;padding-left:10px;border-left:4px solid #4a90e2}.test-images-grid[data-v-58dbfbbd]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:15px;padding:5px}.test-image-btn[data-v-58dbfbbd]{background:#fff;border-radius:10px;padding:10px;display:flex;flex-direction:column;align-items:center;transition:all .3s ease;box-shadow:0 2px 5px rgba(0,0,0,.08);border:1px solid #eaeaea}.test-image-btn[data-v-58dbfbbd]:active,\n.btn-hover[data-v-58dbfbbd]{-webkit-transform:scale(.95);transform:scale(.95);background-color:#f5f5f5}.test-image-btn uni-image[data-v-58dbfbbd]{width:80px;height:80px;object-fit:cover;border-radius:8px}.test-image-btn uni-text[data-v-58dbfbbd]{margin-top:8px;font-size:13px;color:#444;text-align:center;line-height:1.3}\n/* 添加响应式布局 */@media screen and (max-width:320px){.test-images-grid[data-v-58dbfbbd]{grid-template-columns:repeat(2,1fr)}.test-image-btn uni-image[data-v-58dbfbbd]{width:70px;height:70px}}@media screen and (min-width:375px){.test-images-grid[data-v-58dbfbbd]{grid-template-columns:repeat(3,1fr)}}',""]),t.exports=a},"2e50":function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'/* progress-bar.wxss */.nav-container[data-v-9b8021d0]{width:100%;background:#fff;padding:%?20?% %?24?%;box-sizing:border-box;box-shadow:0 %?2?% %?8?% rgba(0,0,0,.05)}.progress-bar[data-v-9b8021d0]{position:relative;padding:%?32?% 0}.progress-track[data-v-9b8021d0]{position:absolute;top:%?52?%;left:8%;width:84%;height:%?4?%;background:#e2e8f0;border-radius:%?4?%}.progress-fill[data-v-9b8021d0]{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#2563eb,#3b82f6);border-radius:%?4?%;transition:width .4s cubic-bezier(.4,0,.2,1);box-shadow:0 0 %?8?% rgba(37,99,235,.3)}.steps-wrapper[data-v-9b8021d0]{position:relative;display:flex;justify-content:space-between;padding:0 %?20?%}.step-item[data-v-9b8021d0]{display:flex;flex-direction:column;align-items:center;position:relative;flex:1;z-index:1;transition:all .3s ease}.step-circle[data-v-9b8021d0]{width:%?40?%;height:%?40?%;border-radius:50%;background:#fff;border:%?2?% solid #cbd5e0;display:flex;align-items:center;justify-content:center;margin-bottom:%?12?%;transition:all .3s cubic-bezier(.4,0,.2,1);font-size:%?22?%;color:#718096;box-shadow:0 %?2?% %?4?% rgba(0,0,0,.05)}.step-label[data-v-9b8021d0]{font-size:%?22?%;color:#718096;transition:all .3s ease;text-align:center;white-space:nowrap;-webkit-transform:scale(.9);transform:scale(.9)}.step-item.completed .step-circle[data-v-9b8021d0]{background:#3b82f6;border-color:#3b82f6;color:#fff;box-shadow:0 %?2?% %?8?% rgba(59,130,246,.3)}.step-item.completed .step-label[data-v-9b8021d0]{color:#3b82f6}.step-item.current .step-circle[data-v-9b8021d0]{width:%?48?%;height:%?48?%;background:#fff;border:%?3?% solid #3b82f6;color:#3b82f6;box-shadow:0 0 0 %?6?% rgba(59,130,246,.2);-webkit-transform:scale(1.2);transform:scale(1.2);font-weight:700}.step-item.current .step-label[data-v-9b8021d0]{color:#3b82f6;-webkit-transform:scale(1);transform:scale(1);font-weight:700;font-size:%?26?%}.check-icon[data-v-9b8021d0]{font-size:%?24?%;font-weight:700}.control-buttons[data-v-9b8021d0]{display:flex;justify-content:center;gap:%?16?%;margin-top:%?32?%;padding:0 %?8?%}.btn[data-v-9b8021d0]{height:%?76?%;padding:0 %?36?%;font-size:%?28?%;border-radius:%?38?%;display:flex;align-items:center;justify-content:center;gap:%?8?%;position:relative;overflow:hidden;transition:all .2s ease}.btn[data-v-9b8021d0]::after{content:"";position:absolute;left:50%;top:50%;width:100%;height:100%;background:radial-gradient(circle,hsla(0,0%,100%,.3) 0,transparent 60%);-webkit-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0);opacity:0;transition:opacity .3s ease-out,-webkit-transform .5s ease-out;transition:transform .5s ease-out,opacity .3s ease-out;transition:transform .5s ease-out,opacity .3s ease-out,-webkit-transform .5s ease-out}.btn[data-v-9b8021d0]:active::after{-webkit-transform:translate(-50%,-50%) scale(2);transform:translate(-50%,-50%) scale(2);opacity:1}.btn-icon[data-v-9b8021d0]{display:inline-flex;align-items:center;justify-content:center;width:%?32?%;height:%?32?%}.prev[data-v-9b8021d0],\n.skip[data-v-9b8021d0]{min-width:%?160?%;background:#f8fafc;border:%?1?% solid #e2e8f0;color:#475569}.prev[data-v-9b8021d0]:active,\n.skip[data-v-9b8021d0]:active{background:#e5e7eb;-webkit-transform:scale(.98);transform:scale(.98)}.next[data-v-9b8021d0]{background:linear-gradient(135deg,#2563eb,#3b82f6);min-width:%?200?%;color:#fff;font-weight:500;border:none;box-shadow:0 %?4?% %?12?% rgba(37,99,235,.2)}.next[data-v-9b8021d0]:active{-webkit-transform:scale(.98);transform:scale(.98);box-shadow:0 %?1?% %?2?% rgba(37,99,235,.2)}.btn.disabled[data-v-9b8021d0]{opacity:.5;cursor:not-allowed;pointer-events:none;box-shadow:none}\n/* 暗色模式适配 */@media (prefers-color-scheme:dark){.nav-container[data-v-9b8021d0]{background:#1a202c}.progress-track[data-v-9b8021d0]{background:#2d3748}.step-circle[data-v-9b8021d0]{background:#2d3748;border-color:#4a5568}.step-label[data-v-9b8021d0]{color:#a0aec0}.prev[data-v-9b8021d0],\n    .skip[data-v-9b8021d0]{background:#2d3748;color:#e2e8f0;border-color:#4a5568}.prev[data-v-9b8021d0]:active,\n    .skip[data-v-9b8021d0]:active{background:#374151}.next[data-v-9b8021d0]{background:linear-gradient(135deg,#1d4ed8,#2563eb)}.btn.disabled[data-v-9b8021d0]{background:#1f2937;color:#6b7280}.step-item.current .step-circle[data-v-9b8021d0]{background:#2d3748}}\n/* 响应式调整 */@media screen and (max-width:375px){.nav-container[data-v-9b8021d0]{padding:%?16?% %?20?%}.btn[data-v-9b8021d0]{height:%?70?%;font-size:%?26?%;padding:0 %?32?%}.step-label[data-v-9b8021d0]{font-size:%?20?%}}',""]),t.exports=a},"2e9e":function(t,a,e){"use strict";e("6a54"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("64aa");var i={data:function(){return{steps:[{id:0,name:"症状选择",path:"/pages/chooseSymptoms/chooseSymptoms"},{id:1,name:"初步诊断",path:"/pages/diagnosisResult/diagnosisResult"},{id:2,name:"问卷调查",path:"/pages/test-questions/test-questions"},{id:3,name:"问卷分析",path:"/pages/diagnosis/diagnosis"},{id:4,name:"病历上传",path:"/pages/upload/upload"},{id:5,name:"最终诊断",path:"/pages/analysis_all/analysis_all"}]}},props:{currentStep:{type:Number,default:0}},methods:{handlePrevStep:function(){var t=this.currentStep,a=getApp();switch(t){case 1:uni.navigateTo({url:"/pages/chooseSymptoms/chooseSymptoms"});break;case 2:0===a.globalData.indexNext?uni.navigateTo({url:"/pages/diagnosisResult/diagnosisResult"}):uni.navigateTo({url:"/pages/diagnosis/diagnosis"});break;case 3:a.globalData.indexNext-=1,uni.navigateTo({url:"/pages/test-questions/test-questions?id=".concat(a.globalData.relatedScalesIndex[a.globalData.indexNext])});break;case 4:uni.navigateTo({url:"/pages/diagnosis/diagnosis"});break}},handleNextStep:function(){var t=this.currentStep,a=getApp();switch(t){case 0:if(0===a.globalData.symptoms.length)return void uni.showToast({title:"请至少选择一个症状",icon:"none",duration:2e3});uni.navigateTo({url:"/pages/diagnosisResult/diagnosisResult"});break;case 1:a.globalData.indexNext<a.globalData.relatedScalesIndex.length?uni.navigateTo({url:"/pages/test-questions/test-questions?id=".concat(a.globalData.relatedScalesIndex[a.globalData.indexNext])}):uni.navigateTo({url:"/pages/upload/upload"});break;case 3:console.log(a.globalData.indexNext),console.log(a.globalData.relatedScalesIndex),a.globalData.indexNext<a.globalData.relatedScalesIndex.length?uni.navigateTo({url:"/pages/test-questions/test-questions?id=".concat(a.globalData.relatedScalesIndex[a.globalData.indexNext])}):uni.navigateTo({url:"/pages/upload/upload"});break;case 4:uni.navigateTo({url:"/pages/analysis_all/analysis_all"});break}},handleSkip:function(){var t=this.currentStep,a=getApp();switch(t){case 1:uni.navigateTo({url:"/pages/upload/upload"});break;case 2:a.globalData.indexNext<a.globalData.relatedScalesIndex.length-1?(a.globalData.indexNext+=1,uni.navigateTo({url:"/pages/test-questions/test-questions?id=".concat(a.globalData.relatedScalesIndex[a.globalData.indexNext])})):uni.navigateTo({url:"/pages/upload/upload"});break;case 4:uni.navigateTo({url:"/pages/analysis_all/analysis_all"});break}},navigateToStep:function(){console.log("占位：函数 navigateToStep 未声明")}},created:function(){}};a.default=i},3983:function(t,a,e){var i=e("2e50");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=e("967d").default;s("86ee0858",i,!0,{sourceMap:!1,shadowMode:!1})},"3bf3":function(t,a,e){"use strict";e.d(a,"b",(function(){return s})),e.d(a,"c",(function(){return n})),e.d(a,"a",(function(){return i}));var i={progressBar:e("7b50").default},s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("progress-bar",{attrs:{"current-step":t.currentStep}}),e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"info-card"},[e("v-uni-view",{staticClass:"info-icon"},[t._v("ℹ️")]),e("v-uni-view",{staticClass:"info-content"},[e("v-uni-text",{staticClass:"info-text"},[t._v("如果您已有病历，请在此页面完成上传。")]),e("v-uni-text",{staticClass:"info-text"},[t._v("若您还没有做系统检查，可直接跳至下一步。")])],1)],1),e("v-uni-view",{staticClass:"upload-section"},[e("v-uni-view",{staticClass:"upload-options"},[e("v-uni-button",{staticClass:"upload-btn camera",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseImageFromCamera.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"btn-icon"},[t._v("📸")]),e("v-uni-text",[t._v("拍照上传")])],1),e("v-uni-button",{staticClass:"upload-btn album",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.chooseImageFromAlbum.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"btn-icon"},[t._v("🖼️")]),e("v-uni-text",[t._v("从相册选择")])],1)],1),t.uploadSuccess?t._e():e("v-uni-view",{staticClass:"test-images"},[e("v-uni-view",{staticClass:"section-title"},[t._v("测试用例（点击上传）")]),e("v-uni-view",{staticClass:"test-images-grid"},t._l(t.testImages,(function(a,i){return e("v-uni-view",{key:i,staticClass:"test-image-btn",attrs:{"data-index":i,"hover-class":"btn-hover"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.uploadTestImage.apply(void 0,arguments)}}},[e("v-uni-image",{attrs:{src:a.src,mode:"aspectFit"}}),e("v-uni-text",[t._v(t._s(a.name))])],1)})),1)],1)],1),t.uploading?e("v-uni-view",{staticClass:"loading"},[e("v-uni-view",{staticClass:"loading-spinner"}),e("v-uni-text",[t._v("正在解析病历...")])],1):t._e(),t.uploadSuccess?[e("v-uni-view",{staticClass:"result-section"},[e("v-uni-view",{staticClass:"result-header"},[e("v-uni-text",{staticClass:"result-title"},[t._v("病历解析结果")])],1),e("v-uni-view",{staticClass:"info-block"},[e("v-uni-view",{staticClass:"block-title"},[t._v("基本信息")]),e("v-uni-view",{staticClass:"info-grid"},[e("v-uni-view",{staticClass:"info-item"},[e("v-uni-text",{staticClass:"label"},[t._v("姓名")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.patient.name))])],1),e("v-uni-view",{staticClass:"info-item"},[e("v-uni-text",{staticClass:"label"},[t._v("性别")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.patient.gender))])],1),e("v-uni-view",{staticClass:"info-item"},[e("v-uni-text",{staticClass:"label"},[t._v("年龄")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.patient.age)+"岁")])],1)],1)],1),e("v-uni-view",{staticClass:"info-block"},[e("v-uni-view",{staticClass:"block-title"},[t._v("发病经过")]),e("v-uni-view",{staticClass:"course-grid"},[e("v-uni-view",{staticClass:"course-item"},[e("v-uni-text",{staticClass:"label"},[t._v("病程")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.course.duration))])],1),e("v-uni-view",{staticClass:"course-item"},[e("v-uni-text",{staticClass:"label"},[t._v("加重时间")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.course.aggravation_period))])],1),e("v-uni-view",{staticClass:"course-item"},[e("v-uni-text",{staticClass:"label"},[t._v("睡眠情况")]),e("v-uni-text",{staticClass:"value"},[t._v(t._s(t.uploadResult.course.sleep_condition))])],1)],1)],1),e("v-uni-view",{staticClass:"info-block symptoms-block"},[e("v-uni-view",{staticClass:"block-title"},[t._v("当前症状")]),e("v-uni-view",{staticClass:"symptoms-list"},t._l(t.uploadResult.symptoms.current,(function(a,i){return e("v-uni-view",{key:i,staticClass:"symptom-item"},[e("v-uni-view",{staticClass:"symptom-content"},[e("v-uni-view",{staticClass:"symptom-name-tag"},[t._v(t._s(a.name))]),a.details?e("v-uni-text",{staticClass:"symptom-details"},[t._v(t._s(a.details))]):t._e()],1),e("v-uni-view",{staticClass:"symptom-indicator"})],1)})),1)],1),e("v-uni-view",{staticClass:"info-block denied-block"},[e("v-uni-view",{staticClass:"block-title"},[t._v("否认症状")]),e("v-uni-view",{staticClass:"denied-symptoms"},t._l(t.uploadResult.symptoms.denied,(function(a,i){return e("v-uni-view",{key:i,staticClass:"denied-symptom-tag"},[t._v(t._s(a))])})),1)],1),e("v-uni-view",{staticClass:"info-block"},[e("v-uni-view",{staticClass:"block-title"},[t._v("病史记录")]),e("v-uni-view",{staticClass:"history-list"},[e("v-uni-view",{staticClass:"history-item"},[e("v-uni-text",{staticClass:"history-label"},[t._v("既往史：")]),e("v-uni-text",{staticClass:"history-value"},[t._v(t._s(t.uploadResult.medical_history.past))])],1),e("v-uni-view",{staticClass:"history-item"},[e("v-uni-text",{staticClass:"history-label"},[t._v("个人史：")]),e("v-uni-text",{staticClass:"history-value"},[t._v(t._s(t.uploadResult.medical_history.personal))])],1)],1)],1)],1)]:t._e()],2)],1)},n=[]},"43fd":function(t,a,e){"use strict";var i=e("d5b7"),s=e.n(i);s.a},"7b50":function(t,a,e){"use strict";e.r(a);var i=e("0e4f"),s=e("177c");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return s[t]}))}(n);e("16bb");var o=e("828b"),d=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"9b8021d0",null,!1,i["a"],void 0);a["default"]=d.exports},8355:function(t,a,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("7a76"),e("c9b5");var s=i(e("7b50")),n=i(e("7b50")),o={components:{progressBar:s.default},data:function(){return{currentStep:4,uploadResult:null,uploading:!1,uploadSuccess:!1,sessionId:"",testImages:[{name:"测试图片1",src:"/static/assets/test/1.png"},{name:"测试图片2",src:"/static/assets/test/2.png"}],name:"",gender:"",age:"",duration:"",aggravation_period:"",sleep_condition:"",current:[],denied:[],past:"",personal:""}},onLoad:function(){this.setData({sessionId:getApp().globalData.session_id})},methods:{chooseImageFromCamera:function(){this.chooseImage("camera")},chooseImageFromAlbum:function(){this.chooseImage("album")},uploadTestImage:function(t){var a=t.currentTarget.dataset.index,e=this.testImages[a].src;this.uploadFile(e)},chooseImage:function(t){var a=this;uni.chooseMedia({count:1,mediaType:["image"],sourceType:[t],success:function(t){a.uploadFile(t.tempFiles[0].tempFilePath)}})},uploadFile:function(t){var a=this;this.setData({uploading:!0,uploadSuccess:!1,uploadResult:null}),uni.uploadFile({url:"http://113.44.52.217:5000/medical_history/".concat(this.sessionId),filePath:t,name:"file",success:function(t){try{var e=JSON.parse(t.data);console.log(e);var i=e.result;if(!i)throw new Error("Invalid response data");a.setData({uploadResult:i,uploadSuccess:!0})}catch(s){console.log("CatchClause",s),console.log("CatchClause",s),console.error("Parse error:",s),uni.showToast({title:"数据解析失败",icon:"error",duration:2e3})}},fail:function(t){console.error("Upload error:",t),uni.showToast({title:"上传失败",icon:"error",duration:2e3})},complete:function(){a.setData({uploading:!1})}})},goToAnalysis:function(){uni.navigateTo({url:"/pages/analysis_all/analysis_all"})}}};a.default=o,a.default.components=Object.assign({"progress-bar":n.default},a.default.components||{})},c942:function(t,a,e){"use strict";e.r(a);var i=e("8355"),s=e.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(n);a["default"]=s.a},d5b7:function(t,a,e){var i=e("263a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=e("967d").default;s("079ce70a",i,!0,{sourceMap:!1,shadowMode:!1})}}]);